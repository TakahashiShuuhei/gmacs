# gmacs BDD Test Specifications

このディレクトリはgmacsの振る舞い駆動開発(BDD)テスト仕様書を管理します。

## 構成

```
specs/
├── README.md                    # このファイル
├── features/                    # 日本語Gherkin仕様書（手動編集）
│   ├── display/                 # 画面表示関連
│   ├── input/                   # キーボード入力関連
│   ├── scroll/                  # スクロール機能
│   ├── buffer/                  # バッファ管理
│   └── editor/                  # エディタ基本機能
├── tools/                       # ドキュメント生成ツール
└── test-docs.md                 # テストから抽出された日本語ドキュメント（自動生成）
```

## 日本語Gherkin記法

各機能仕様は以下の形式で記述されます：

```gherkin
Feature: 機能名
  As a ユーザー
  I want to やりたいこと
  So that 得られる価値

  Scenario: シナリオ名
    Given 前提条件
    When アクション
    Then 期待結果
    And 追加の期待結果
```

## テストコードとの同期

- 実装テストファイルには`@spec`アノテーションでBDD仕様へのリンクを記載
- テストアノテーションは日本語で記述
- ドキュメント生成ツールで自動的に日本語テストドキュメントを生成

## ドキュメント生成

### Makefileを使用（推奨）

```bash
# テストコードから日本語ドキュメントを抽出
make docs

# エイリアス
make test-docs
```

### 直接実行

```bash
# テストドキュメント抽出
go run specs/tools/extract-test-docs.go
```

## ドキュメント構成

1. **手動編集**: `specs/features/*.feature`
   - 日本語Gherkin形式のBDD仕様書
   - 直接編集して仕様を管理

2. **自動生成**: `specs/test-docs.md`
   - テストコードのアノテーションから抽出
   - テストと仕様の対応関係を自動的に日本語で文書化

## 特徴

- **シンプル**: .featureファイルが既に日本語なので冗長な変換を削除
- **直接編集**: 仕様書を直接編集してバージョン管理
- **自動同期**: テストコードの変更が自動的にドキュメントに反映
- **日本語完全対応**: 全ドキュメントが自然な日本語

## ワークフロー

1. **仕様作成**: `specs/features/` で日本語Gherkin仕様を作成
2. **テスト実装**: 日本語アノテーション付きでテストを実装
3. **ドキュメント生成**: `make docs` でテストドキュメントを自動生成